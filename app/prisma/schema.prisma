generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native", "linux-musl-arm64-openssl-3.0.x"]
    output = "/home/ubuntu/auswanderer_mindset_app/app/node_modules/.prisma/client"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  quizResults QuizResult[]
  responses   QuizResponse[]

  @@map("users")
}

model QuizResponse {
  id         Int      @id @default(autoincrement())
  userId     Int
  questionId String
  answer     Int      // Score value (1-5 scale)
  category   String   // Category like "veraenderungsbereitschaft", "sicherheitsbeduerfnis", etc.
  createdAt  DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("quiz_responses")
}

model QuizResult {
  id                      Int      @id @default(autoincrement())
  userId                  Int
  totalScore              Int
  resultType              String   // "bereit", "bedingt_bereit", "nicht_bereit"
  categoryScores          Json     // Scores for each category
  recommendations         Json     // Personalized improvement suggestions
  createdAt               DateTime @default(now())
  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("quiz_results")
}
